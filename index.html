<!doctype html>
<html lang="en" class="bg-gray-900 text-gray-100 font-sans">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./public/css/output.css" />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Hebrew&display=swap" rel="stylesheet" />
    <script src="app.js" defer></script>
    <title>TefillaHub</title>
  </head>

  <body class="bg-gray-900 text-gray-100">
    <div class="bg-gray-800 pb-3">
      <section class="p-4">
        <div class="flex justify-between items-center">
          <div>
            <p id="gregorian-date" class="text-sm text-gray-400 mb-1">Loading Gregorian date...</p>
            <p id="hebrew-date" class="font-semibold">
              <script src="https://www.hebcal.com/etc/hdate-en.js" crossorigin="anonymous"></script>
            </p>
          </div>
        </div>
      </section>

      <section class="bg-gradient-to-r from-blue-700 to-blue-600 text-white rounded-lg shadow-lg p-4 mx-4">
        <div class="flex justify-between items-start">
          <div>
            <h1 class="text-lg font-semibold leading-tight">Happening This Week</h1>
            <p class="text-sm mt-1">Bellevue Hill</p>
          </div>
          <div class="text-right">
            <p class="text-xs">Shabbat Times</p>
            <p id="shabbat-times" class="text-lg font-semibold leading-tight mt-1">
              <script>
                (async () => {
                  try {
                    const response = await fetch('https://www.hebcal.com/shabbat/?cfg=json&geonameid=2174003&m=50');
                    if (!response.ok) {
                      throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    const data = await response.json();

                    // Extract candle lighting and havdalah times
                    const candleLighting = data.items.find((item) => item.category === 'candles');
                    const havdalah = data.items.find((item) => item.category === 'havdalah');

                    // Display Shabbat times with emojis
                    if (candleLighting && havdalah) {
                      const candleTime = candleLighting.title.split(': ')[1]; // Candle lighting time
                      const havdalahTime = havdalah.title.split(': ')[1]; // Havdalah time

                      // Format with emojis and separated by -
                      document.getElementById('shabbat-times').textContent = `üïØÔ∏è ${candleTime} - ‚ú® ${havdalahTime}`;
                    } else {
                      document.getElementById('shabbat-times').textContent = 'Shabbat times not found';
                    }
                  } catch (error) {
                    console.error('Error fetching Shabbat times:', error);
                    document.getElementById('shabbat-times').textContent = 'Error loading times';
                  }
                })();
              </script>
            </p>
          </div>
        </div>
        <hr class="border-t border-white/30 mt-3" />
      </section>
    </div>
  </body>
</html>
